<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>TÃ­ch Ä‘iá»ƒm Khu Vui ChÆ¡i</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Shortcut icon -->
  <link rel="icon" href="img/logo-removed1.png">

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* phÃ¡o giáº¥y */
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      animation: fall 2.5s linear forwards;
      z-index: 100;
    }
    @keyframes fall {
      from { transform: translateY(-10vh) rotate(0deg); }
      to   { transform: translateY(110vh) rotate(360deg); }
    }
  </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-pink-200 via-blue-200 to-purple-200 px-3 py-4">

<!-- LOGO -->
<div class="flex justify-center mb-3">
  <img src="img/logo-removed1.png"
       class="w-60 md:w-72 drop-shadow-xl select-none pointer-events-none">
</div>

<!-- TIÃŠU Äá»€ -->
<h1 class="text-xl md:text-3xl font-bold text-white drop-shadow-lg text-center mb-4">
  ğŸ  Há»† THá»NG TÃCH ÄIá»‚M KHU VUI CHÆ I
</h1>

<div class="w-full max-w-5xl mx-auto">

  <!-- ThÃªm bÃ© -->
  <div class="mb-4 backdrop-blur-xl bg-white/45 border border-white/40 rounded-3xl p-4 shadow-xl">
    <h2 class="font-semibold text-white drop-shadow mb-2">â• ThÃªm bÃ© má»›i</h2>
    <div class="flex gap-2">
      <input id="childName"
        placeholder="TÃªn bÃ©"
        class="flex-1 px-4 py-3 rounded-2xl bg-white/80 focus:outline-none">
      <button onclick="addChild()"
        class="px-5 rounded-2xl bg-white font-semibold text-gray-800">
        ThÃªm
      </button>
    </div>
  </div>

  <!-- TÃ¬m kiáº¿m -->
  <input id="search"
    placeholder="ğŸ” TÃ¬m theo tÃªn hoáº·c ID tháº»"
    class="w-full mb-4 px-4 py-3 rounded-2xl bg-white/80 focus:outline-none"
    oninput="render()">

  <!-- Cards -->
  <div id="cards" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
</div>

<!-- POPUP -->
<div id="popup"
  class="fixed inset-0 hidden items-center justify-center bg-black/40 z-50">
  <div class="backdrop-blur-xl bg-white/90 rounded-3xl p-6 text-center shadow-2xl scale-95 animate-pulse">
    <img src="img/logo-removed1.png" class="w-32 mx-auto mb-3">
    <h2 class="text-xl font-bold text-pink-500 mb-2">ğŸ‰ ChÃºc má»«ng bÃ©!</h2>
    <p class="text-gray-700 mb-4">BÃ© Ä‘Ã£ Ä‘á»•i thÃ nh cÃ´ng 1 vÃ© miá»…n phÃ­ ğŸŸï¸</p>
    <button onclick="closePopup()"
      class="px-6 py-3 rounded-2xl bg-pink-400 text-white font-semibold">
      Tuyá»‡t vá»i ğŸ¥³
    </button>
  </div>
</div>

<script>
let children = JSON.parse(localStorage.getItem("children")) || [];
let openMenuId = null;

function save() {
  localStorage.setItem("children", JSON.stringify(children));
}

function addChild() {
  const name = childName.value.trim();
  if (!name) return alert("Nháº­p tÃªn bÃ©");
  children.push({ id: Date.now(), name, stamps: 0, tickets: 0 });
  childName.value = "";
  save(); render();
}

function addStamp(id) {
  const c = children.find(x => x.id === id);
  if (c.stamps < 10) c.stamps++;
  save(); render();
}

function redeem(id) {
  const c = children.find(x => x.id === id);
  c.stamps = 0;
  c.tickets++;
  save(); render();
  showPopup();
}

function toggleMenu(id) {
  openMenuId = openMenuId === id ? null : id;
  render();
}

function editChild(id) {
  const c = children.find(x => x.id === id);
  const n = prompt("Sá»­a tÃªn bÃ©:", c.name);
  if (n) { c.name = n; save(); render(); }
}

function deleteChild(id) {
  if (!confirm("XÃ³a phiáº¿u nÃ y?")) return;
  children = children.filter(x => x.id !== id);
  save(); render();
}

function showPopup() {
  document.getElementById("popup").classList.remove("hidden");
  launchConfetti();
}

function closePopup() {
  document.getElementById("popup").classList.add("hidden");
}

function launchConfetti() {
  for (let i = 0; i < 40; i++) {
    const c = document.createElement("div");
    c.className = "confetti";
    c.style.left = Math.random() * 100 + "vw";
    c.style.background = ["#f472b6","#60a5fa","#facc15","#34d399"][Math.floor(Math.random()*4)];
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 2500);
  }
}

function render() {
  const key = search.value.toLowerCase();
  cards.innerHTML = "";

  children.filter(c =>
    c.name.toLowerCase().includes(key) ||
    c.id.toString().includes(key)
  ).forEach(c => {
    cards.innerHTML += `
    <div class="relative backdrop-blur-xl bg-white/45 border border-white/40 rounded-3xl p-4 shadow-xl text-white scale-[1.02]">

      <button onclick="toggleMenu(${c.id})"
        class="absolute top-3 right-3 text-2xl">â‹¯</button>

      ${openMenuId===c.id?`
      <div class="absolute top-10 right-3 bg-white text-gray-800 rounded-xl shadow overflow-hidden">
        <button onclick="editChild(${c.id})" class="block px-4 py-2">âœï¸ Sá»­a</button>
        <button onclick="deleteChild(${c.id})" class="block px-4 py-2 text-red-500">ğŸ—‘ï¸ XÃ³a</button>
      </div>`:""}

      <div class="flex justify-between items-center mb-3 pt-4">
        <div>
          <p class="font-bold text-lg">${c.name}</p>
          <p class="text-sm opacity-80">ID: ${c.id}</p>
        </div>
        <div class="text-lg font-bold">ğŸŸï¸ ${c.tickets}</div>
      </div>

      <div class="grid grid-cols-5 gap-2 mb-4">
        ${Array.from({length:10}).map((_,i)=>`
        <div class="w-14 h-14 rounded-full bg-white/50 flex items-center justify-center">
          ${i<c.stamps?'<img src="img/logo-removed1.png" class="w-8">':""}
        </div>`).join("")}
      </div>

      <div class="flex gap-2">
        <button onclick="addStamp(${c.id})"
          class="flex-1 py-3 rounded-2xl bg-white text-gray-800 font-semibold">
          â• ThÃªm dáº¥u
        </button>

        ${c.stamps===10?`
        <button onclick="redeem(${c.id})"
          class="flex-1 py-3 rounded-2xl bg-green-400 text-white font-bold animate-pulse">
          ğŸ Äá»•i vÃ©
        </button>`:""}
      </div>
    </div>`;
  });
}
render();
</script>
</body>
</html>
